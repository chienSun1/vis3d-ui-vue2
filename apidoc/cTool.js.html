<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: cTool.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: cTool.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*Cesium无关的常用小工具 */
// 图片下载 实现截屏
/**
 * 以图片方式下载文件
 * @param {*} canvas 截屏的canvas对象
 * @param {*} name 下载文件名称
 */
function downloadCanvasIamge(canvas, name) {
    // 通过选择器获取canvas元素
    var url = canvas.toDataURL('image/png')
    console.log(url);
    // 生成一个a元素
    var a = document.createElement('a')
    // 创建一个单击事件
    var event = new MouseEvent('click')
    // 将a的download属性设置为我们想要下载的图片名称，若name不存在则使用‘下载图片名称’作为默认名称
    a.download = name || '下载图片名称'
    // 将生成的URL设置为a.href属性
    a.href = url
    // 触发a的单击事件
    a.dispatchEvent(event)
}

let file = {
    //============内部私有属性及方法============
    _download(fileName, blob) {
        var aLink = document.createElement('a');
        aLink.download = fileName;
        aLink.href = URL.createObjectURL(blob);
        document.body.appendChild(aLink);
        aLink.click();
        document.body.removeChild(aLink);
    },

    //下载保存文件
    downloadFile(fileName, string) {
        var blob = new Blob([string]);
        this._download(fileName, blob);
    },

    //下载导出图片
    downloadImage(name, canvas) {
        var base64 = canvas.toDataURL("image/png");
        var blob = this.base64Img2Blob(base64);
        this._download(name + '.png', blob);
    },

    base64Img2Blob(code) {
        var parts = code.split(';base64,');
        var contentType = parts[0].split(':')[1];
        var raw = window.atob(parts[1]);
        var rawLength = raw.length;

        var uInt8Array = new Uint8Array(rawLength);
        for (var i = 0; i &lt; rawLength; ++i) {
            uInt8Array[i] = raw.charCodeAt(i);
        }
        return new Blob([uInt8Array], {
            type: contentType
        });
    }
}

// 验证 
let test = {
    isPositiveNumber(val){ // 正则表达式 >=0
        let reg = /^[1-9]*[1-9][0-9]*$/;
        return reg.test(val)
    }
}

export default {
    downloadCanvasIamge: downloadCanvasIamge,
    file : file,
    test : test
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#cartesianToLnglat">cartesianToLnglat</a></li><li><a href="global.html#cartesiansToLnglats">cartesiansToLnglats</a></li><li><a href="global.html#computeAngle">computeAngle</a></li><li><a href="global.html#computeArea">computeArea</a></li><li><a href="global.html#computeAreaOfTriangle">computeAreaOfTriangle</a></li><li><a href="global.html#computeUniforms">computeUniforms</a></li><li><a href="global.html#downloadCanvasIamge">downloadCanvasIamge</a></li><li><a href="global.html#flyTo">flyTo</a></li><li><a href="global.html#get3dtilesHeight">get3dtilesHeight</a></li><li><a href="global.html#getCameraView">getCameraView</a></li><li><a href="global.html#getCirclePoints">getCirclePoints</a></li><li><a href="global.html#getIntersectPosition">getIntersectPosition</a></li><li><a href="global.html#getSlopePosition">getSlopePosition</a></li><li><a href="global.html#getTerrainHeight">getTerrainHeight</a></li><li><a href="global.html#lerpPositions">lerpPositions</a></li><li><a href="global.html#lnglatsToCartesians">lnglatsToCartesians</a></li><li><a href="global.html#oreatationToHpr">oreatationToHpr</a></li><li><a href="global.html#setCameraView">setCameraView</a></li><li><a href="global.html#updatePositionsHeight">updatePositionsHeight</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Mon Dec 26 2022 20:35:34 GMT+0800 (中国标准时间)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
