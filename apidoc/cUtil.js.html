<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>cUtil.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Easy3d api文档</a></h2><h3>Classes</h3><ul><li><a href="BaseLayer.html">BaseLayer</a><ul class='methods'><li data-type='method'><a href="BaseLayer.html#.hide#hide">hide</a></li><li data-type='method'><a href="BaseLayer.html#.load#load">load</a></li><li data-type='method'><a href="BaseLayer.html#.remove#remove">remove</a></li><li data-type='method'><a href="BaseLayer.html#.setAlpha#setAlpha">setAlpha</a></li><li data-type='method'><a href="BaseLayer.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BaseLayer.html#.show#show">show</a></li><li data-type='method'><a href="BaseLayer.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BaseLayer.ArcgiscacheLayer.html">ArcgiscacheLayer</a><ul class='methods'><li data-type='method'><a href="BaseLayer.ArcgiscacheLayer.html#.hide#hide">hide</a></li><li data-type='method'><a href="BaseLayer.ArcgiscacheLayer.html#.load#load">load</a></li><li data-type='method'><a href="BaseLayer.ArcgiscacheLayer.html#.remove#remove">remove</a></li><li data-type='method'><a href="BaseLayer.ArcgiscacheLayer.html#.setAlpha#setAlpha">setAlpha</a></li><li data-type='method'><a href="BaseLayer.ArcgiscacheLayer.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BaseLayer.ArcgiscacheLayer.html#.show#show">show</a></li><li data-type='method'><a href="BaseLayer.ArcgiscacheLayer.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BaseLayer.GeojsonLayer.html">GeojsonLayer</a><ul class='methods'><li data-type='method'><a href="BaseLayer.GeojsonLayer.html#.createPoint#createPoint">createPoint</a></li><li data-type='method'><a href="BaseLayer.GeojsonLayer.html#.hide#hide">hide</a></li><li data-type='method'><a href="BaseLayer.GeojsonLayer.html#.load#load">load</a></li><li data-type='method'><a href="BaseLayer.GeojsonLayer.html#.remove#remove">remove</a></li><li data-type='method'><a href="BaseLayer.GeojsonLayer.html#.setAlpha#setAlpha">setAlpha</a></li><li data-type='method'><a href="BaseLayer.GeojsonLayer.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BaseLayer.GeojsonLayer.html#.show#show">show</a></li><li data-type='method'><a href="BaseLayer.GeojsonLayer.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BaseLayer.GridLayer.html">GridLayer</a><ul class='methods'><li data-type='method'><a href="BaseLayer.GridLayer.html#.hide#hide">hide</a></li><li data-type='method'><a href="BaseLayer.GridLayer.html#.load#load">load</a></li><li data-type='method'><a href="BaseLayer.GridLayer.html#.remove#remove">remove</a></li><li data-type='method'><a href="BaseLayer.GridLayer.html#.setAlpha#setAlpha">setAlpha</a></li><li data-type='method'><a href="BaseLayer.GridLayer.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BaseLayer.GridLayer.html#.show#show">show</a></li><li data-type='method'><a href="BaseLayer.GridLayer.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BaseLayer.MapserverLayer.html">MapserverLayer</a><ul class='methods'><li data-type='method'><a href="BaseLayer.MapserverLayer.html#.hide#hide">hide</a></li><li data-type='method'><a href="BaseLayer.MapserverLayer.html#.load#load">load</a></li><li data-type='method'><a href="BaseLayer.MapserverLayer.html#.remove#remove">remove</a></li><li data-type='method'><a href="BaseLayer.MapserverLayer.html#.setAlpha#setAlpha">setAlpha</a></li><li data-type='method'><a href="BaseLayer.MapserverLayer.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BaseLayer.MapserverLayer.html#.show#show">show</a></li><li data-type='method'><a href="BaseLayer.MapserverLayer.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BaseLayer.SingleImageLayer.html">SingleImageLayer</a><ul class='methods'><li data-type='method'><a href="BaseLayer.SingleImageLayer.html#.hide#hide">hide</a></li><li data-type='method'><a href="BaseLayer.SingleImageLayer.html#.load#load">load</a></li><li data-type='method'><a href="BaseLayer.SingleImageLayer.html#.remove#remove">remove</a></li><li data-type='method'><a href="BaseLayer.SingleImageLayer.html#.setAlpha#setAlpha">setAlpha</a></li><li data-type='method'><a href="BaseLayer.SingleImageLayer.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BaseLayer.SingleImageLayer.html#.show#show">show</a></li><li data-type='method'><a href="BaseLayer.SingleImageLayer.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BaseLayer.TDTLayer.html">TDTLayer</a><ul class='methods'><li data-type='method'><a href="BaseLayer.TDTLayer.html#.hide#hide">hide</a></li><li data-type='method'><a href="BaseLayer.TDTLayer.html#.load#load">load</a></li><li data-type='method'><a href="BaseLayer.TDTLayer.html#.remove#remove">remove</a></li><li data-type='method'><a href="BaseLayer.TDTLayer.html#.setAlpha#setAlpha">setAlpha</a></li><li data-type='method'><a href="BaseLayer.TDTLayer.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BaseLayer.TDTLayer.html#.show#show">show</a></li><li data-type='method'><a href="BaseLayer.TDTLayer.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BaseLayer.TMSLayer.html">TMSLayer</a><ul class='methods'><li data-type='method'><a href="BaseLayer.TMSLayer.html#.hide#hide">hide</a></li><li data-type='method'><a href="BaseLayer.TMSLayer.html#.load#load">load</a></li><li data-type='method'><a href="BaseLayer.TMSLayer.html#.remove#remove">remove</a></li><li data-type='method'><a href="BaseLayer.TMSLayer.html#.setAlpha#setAlpha">setAlpha</a></li><li data-type='method'><a href="BaseLayer.TMSLayer.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BaseLayer.TMSLayer.html#.show#show">show</a></li><li data-type='method'><a href="BaseLayer.TMSLayer.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BaseLayer.WMSLayer.html">WMSLayer</a><ul class='methods'><li data-type='method'><a href="BaseLayer.WMSLayer.html#.hide#hide">hide</a></li><li data-type='method'><a href="BaseLayer.WMSLayer.html#.load#load">load</a></li><li data-type='method'><a href="BaseLayer.WMSLayer.html#.remove#remove">remove</a></li><li data-type='method'><a href="BaseLayer.WMSLayer.html#.setAlpha#setAlpha">setAlpha</a></li><li data-type='method'><a href="BaseLayer.WMSLayer.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BaseLayer.WMSLayer.html#.show#show">show</a></li><li data-type='method'><a href="BaseLayer.WMSLayer.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BaseLayer.WMTSLayer.html">WMTSLayer</a><ul class='methods'><li data-type='method'><a href="BaseLayer.WMTSLayer.html#.hide#hide">hide</a></li><li data-type='method'><a href="BaseLayer.WMTSLayer.html#.load#load">load</a></li><li data-type='method'><a href="BaseLayer.WMTSLayer.html#.remove#remove">remove</a></li><li data-type='method'><a href="BaseLayer.WMTSLayer.html#.setAlpha#setAlpha">setAlpha</a></li><li data-type='method'><a href="BaseLayer.WMTSLayer.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BaseLayer.WMTSLayer.html#.show#show">show</a></li><li data-type='method'><a href="BaseLayer.WMTSLayer.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BaseLayer.XYZLayer.html">XYZLayer</a><ul class='methods'><li data-type='method'><a href="BaseLayer.XYZLayer.html#.hide#hide">hide</a></li><li data-type='method'><a href="BaseLayer.XYZLayer.html#.load#load">load</a></li><li data-type='method'><a href="BaseLayer.XYZLayer.html#.remove#remove">remove</a></li><li data-type='method'><a href="BaseLayer.XYZLayer.html#.setAlpha#setAlpha">setAlpha</a></li><li data-type='method'><a href="BaseLayer.XYZLayer.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BaseLayer.XYZLayer.html#.show#show">show</a></li><li data-type='method'><a href="BaseLayer.XYZLayer.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BaseMeasure.html">BaseMeasure</a><ul class='methods'><li data-type='method'><a href="BaseMeasure.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BaseMeasure.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BaseMeasure.html#.setUnit#setUnit">setUnit</a></li><li data-type='method'><a href="BaseMeasure.html#.start#start">start</a></li><li data-type='method'><a href="BaseMeasure.html#.startEdit#startEdit">startEdit</a></li></ul></li><li><a href="BaseMeasure.MeasureAzimutht.html">MeasureAzimutht</a><ul class='methods'><li data-type='method'><a href="BaseMeasure.MeasureAzimutht.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BaseMeasure.MeasureAzimutht.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BaseMeasure.MeasureAzimutht.html#.setUnit#setUnit">setUnit</a></li><li data-type='method'><a href="BaseMeasure.MeasureAzimutht.html#.start#start">start</a></li><li data-type='method'><a href="BaseMeasure.MeasureAzimutht.html#.startEdit#startEdit">startEdit</a></li></ul></li><li><a href="BaseMeasure.MeasureGroundDistance.html">MeasureGroundDistance</a><ul class='methods'><li data-type='method'><a href="BaseMeasure.MeasureGroundDistance.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BaseMeasure.MeasureGroundDistance.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BaseMeasure.MeasureGroundDistance.html#.setUnit#setUnit">setUnit</a></li><li data-type='method'><a href="BaseMeasure.MeasureGroundDistance.html#.start#start">start</a></li><li data-type='method'><a href="BaseMeasure.MeasureGroundDistance.html#.startEdit#startEdit">startEdit</a></li></ul></li><li><a href="BaseMeasure.MeasureHeight.html">MeasureHeight</a><ul class='methods'><li data-type='method'><a href="BaseMeasure.MeasureHeight.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BaseMeasure.MeasureHeight.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BaseMeasure.MeasureHeight.html#.setUnit#setUnit">setUnit</a></li><li data-type='method'><a href="BaseMeasure.MeasureHeight.html#.start#start">start</a></li><li data-type='method'><a href="BaseMeasure.MeasureHeight.html#.startEdit#startEdit">startEdit</a></li></ul></li><li><a href="BaseMeasure.MeasureLnglat.html">MeasureLnglat</a><ul class='methods'><li data-type='method'><a href="BaseMeasure.MeasureLnglat.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BaseMeasure.MeasureLnglat.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BaseMeasure.MeasureLnglat.html#.setUnit#setUnit">setUnit</a></li><li data-type='method'><a href="BaseMeasure.MeasureLnglat.html#.start#start">start</a></li><li data-type='method'><a href="BaseMeasure.MeasureLnglat.html#.startEdit#startEdit">startEdit</a></li></ul></li><li><a href="BaseMeasure.MeasureSection.html">MeasureSection</a><ul class='methods'><li data-type='method'><a href="BaseMeasure.MeasureSection.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BaseMeasure.MeasureSection.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BaseMeasure.MeasureSection.html#.setUnit#setUnit">setUnit</a></li><li data-type='method'><a href="BaseMeasure.MeasureSection.html#.start#start">start</a></li><li data-type='method'><a href="BaseMeasure.MeasureSection.html#.startEdit#startEdit">startEdit</a></li></ul></li><li><a href="BaseMeasure.MeasureSlope.html">MeasureSlope</a><ul class='methods'><li data-type='method'><a href="BaseMeasure.MeasureSlope.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BaseMeasure.MeasureSlope.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BaseMeasure.MeasureSlope.html#.setUnit#setUnit">setUnit</a></li><li data-type='method'><a href="BaseMeasure.MeasureSlope.html#.start#start">start</a></li><li data-type='method'><a href="BaseMeasure.MeasureSlope.html#.startEdit#startEdit">startEdit</a></li></ul></li><li><a href="BaseMeasure.MeasureSpaceArea.html">MeasureSpaceArea</a><ul class='methods'><li data-type='method'><a href="BaseMeasure.MeasureSpaceArea.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BaseMeasure.MeasureSpaceArea.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BaseMeasure.MeasureSpaceArea.html#.setUnit#setUnit">setUnit</a></li><li data-type='method'><a href="BaseMeasure.MeasureSpaceArea.html#.start#start">start</a></li><li data-type='method'><a href="BaseMeasure.MeasureSpaceArea.html#.startEdit#startEdit">startEdit</a></li></ul></li><li><a href="BaseMeasure.MeasureSpaceDistance.html">MeasureSpaceDistance</a><ul class='methods'><li data-type='method'><a href="BaseMeasure.MeasureSpaceDistance.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BaseMeasure.MeasureSpaceDistance.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BaseMeasure.MeasureSpaceDistance.html#.setUnit#setUnit">setUnit</a></li><li data-type='method'><a href="BaseMeasure.MeasureSpaceDistance.html#.start#start">start</a></li><li data-type='method'><a href="BaseMeasure.MeasureSpaceDistance.html#.startEdit#startEdit">startEdit</a></li></ul></li><li><a href="BaseMeasure.MeasureTriangle.html">MeasureTriangle</a><ul class='methods'><li data-type='method'><a href="BaseMeasure.MeasureTriangle.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BaseMeasure.MeasureTriangle.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BaseMeasure.MeasureTriangle.html#.setUnit#setUnit">setUnit</a></li><li data-type='method'><a href="BaseMeasure.MeasureTriangle.html#.start#start">start</a></li><li data-type='method'><a href="BaseMeasure.MeasureTriangle.html#.startEdit#startEdit">startEdit</a></li></ul></li><li><a href="BasePlot.html">BasePlot</a><ul class='methods'><li data-type='method'><a href="BasePlot.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BasePlot.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BasePlot.html#.getCatesian3FromPX#getCatesian3FromPX">getCatesian3FromPX</a></li><li data-type='method'><a href="BasePlot.html#.getEntity#getEntity">getEntity</a></li><li data-type='method'><a href="BasePlot.html#.getPositions#getPositions">getPositions</a></li><li data-type='method'><a href="BasePlot.html#.remove#remove">remove</a></li><li data-type='method'><a href="BasePlot.html#.setOwnProp#setOwnProp">setOwnProp</a></li><li data-type='method'><a href="BasePlot.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BasePlot.html#.startEdit#startEdit">startEdit</a></li><li data-type='method'><a href="BasePlot.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BasePlot.BasePlot.html">BasePlot</a><ul class='methods'><li data-type='method'><a href="BasePlot.BasePlot.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BasePlot.BasePlot.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BasePlot.BasePlot.html#.getCatesian3FromPX#getCatesian3FromPX">getCatesian3FromPX</a></li><li data-type='method'><a href="BasePlot.BasePlot.html#.getEntity#getEntity">getEntity</a></li><li data-type='method'><a href="BasePlot.BasePlot.html#.getPositions#getPositions">getPositions</a></li><li data-type='method'><a href="BasePlot.BasePlot.html#.remove#remove">remove</a></li><li data-type='method'><a href="BasePlot.BasePlot.html#.setOwnProp#setOwnProp">setOwnProp</a></li><li data-type='method'><a href="BasePlot.BasePlot.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BasePlot.BasePlot.html#.startEdit#startEdit">startEdit</a></li><li data-type='method'><a href="BasePlot.BasePlot.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BasePlot.CreateArrow.html">CreateArrow</a><ul class='methods'><li data-type='method'><a href="BasePlot.CreateArrow.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BasePlot.CreateArrow.html#.end#end">end</a></li><li data-type='method'><a href="BasePlot.CreateArrow.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BasePlot.CreateArrow.html#.getCatesian3FromPX#getCatesian3FromPX">getCatesian3FromPX</a></li><li data-type='method'><a href="BasePlot.CreateArrow.html#.getEntity#getEntity">getEntity</a></li><li data-type='method'><a href="BasePlot.CreateArrow.html#.getPositions#getPositions">getPositions</a></li><li data-type='method'><a href="BasePlot.CreateArrow.html#.getStyle#getStyle">getStyle</a></li><li data-type='method'><a href="BasePlot.CreateArrow.html#.remove#remove">remove</a></li><li data-type='method'><a href="BasePlot.CreateArrow.html#.setOwnProp#setOwnProp">setOwnProp</a></li><li data-type='method'><a href="BasePlot.CreateArrow.html#.setStyle#setStyle">setStyle</a></li><li data-type='method'><a href="BasePlot.CreateArrow.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BasePlot.CreateArrow.html#.start#start">start</a></li><li data-type='method'><a href="BasePlot.CreateArrow.html#.startEdit#startEdit">startEdit</a></li><li data-type='method'><a href="BasePlot.CreateArrow.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BasePlot.CreateBillboard.html">CreateBillboard</a><ul class='methods'><li data-type='method'><a href="BasePlot.CreateBillboard.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BasePlot.CreateBillboard.html#.end#end">end</a></li><li data-type='method'><a href="BasePlot.CreateBillboard.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BasePlot.CreateBillboard.html#.getCatesian3FromPX#getCatesian3FromPX">getCatesian3FromPX</a></li><li data-type='method'><a href="BasePlot.CreateBillboard.html#.getEntity#getEntity">getEntity</a></li><li data-type='method'><a href="BasePlot.CreateBillboard.html#.getPositions#getPositions">getPositions</a></li><li data-type='method'><a href="BasePlot.CreateBillboard.html#.getStyle#getStyle">getStyle</a></li><li data-type='method'><a href="BasePlot.CreateBillboard.html#.remove#remove">remove</a></li><li data-type='method'><a href="BasePlot.CreateBillboard.html#.setOwnProp#setOwnProp">setOwnProp</a></li><li data-type='method'><a href="BasePlot.CreateBillboard.html#.setPosition#setPosition">setPosition</a></li><li data-type='method'><a href="BasePlot.CreateBillboard.html#.setStyle#setStyle">setStyle</a></li><li data-type='method'><a href="BasePlot.CreateBillboard.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BasePlot.CreateBillboard.html#.start#start">start</a></li><li data-type='method'><a href="BasePlot.CreateBillboard.html#.startEdit#startEdit">startEdit</a></li><li data-type='method'><a href="BasePlot.CreateBillboard.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BasePlot.CreateCircle.html">CreateCircle</a><ul class='methods'><li data-type='method'><a href="BasePlot.CreateCircle.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BasePlot.CreateCircle.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BasePlot.CreateCircle.html#.getCatesian3FromPX#getCatesian3FromPX">getCatesian3FromPX</a></li><li data-type='method'><a href="BasePlot.CreateCircle.html#.getEntity#getEntity">getEntity</a></li><li data-type='method'><a href="BasePlot.CreateCircle.html#.getPositions#getPositions">getPositions</a></li><li data-type='method'><a href="BasePlot.CreateCircle.html#.remove#remove">remove</a></li><li data-type='method'><a href="BasePlot.CreateCircle.html#.setOwnProp#setOwnProp">setOwnProp</a></li><li data-type='method'><a href="BasePlot.CreateCircle.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BasePlot.CreateCircle.html#.start#start">start</a></li><li data-type='method'><a href="BasePlot.CreateCircle.html#.startEdit#startEdit">startEdit</a></li><li data-type='method'><a href="BasePlot.CreateCircle.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BasePlot.CreateGltfModel.html">CreateGltfModel</a><ul class='methods'><li data-type='method'><a href="BasePlot.CreateGltfModel.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BasePlot.CreateGltfModel.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BasePlot.CreateGltfModel.html#.getCatesian3FromPX#getCatesian3FromPX">getCatesian3FromPX</a></li><li data-type='method'><a href="BasePlot.CreateGltfModel.html#.getEntity#getEntity">getEntity</a></li><li data-type='method'><a href="BasePlot.CreateGltfModel.html#.getPositions#getPositions">getPositions</a></li><li data-type='method'><a href="BasePlot.CreateGltfModel.html#.remove#remove">remove</a></li><li data-type='method'><a href="BasePlot.CreateGltfModel.html#.setOrientation#setOrientation">setOrientation</a></li><li data-type='method'><a href="BasePlot.CreateGltfModel.html#.setOwnProp#setOwnProp">setOwnProp</a></li><li data-type='method'><a href="BasePlot.CreateGltfModel.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BasePlot.CreateGltfModel.html#.startEdit#startEdit">startEdit</a></li><li data-type='method'><a href="BasePlot.CreateGltfModel.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BasePlot.CreateLabel.html">CreateLabel</a><ul class='methods'><li data-type='method'><a href="BasePlot.CreateLabel.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BasePlot.CreateLabel.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BasePlot.CreateLabel.html#.getCatesian3FromPX#getCatesian3FromPX">getCatesian3FromPX</a></li><li data-type='method'><a href="BasePlot.CreateLabel.html#.getEntity#getEntity">getEntity</a></li><li data-type='method'><a href="BasePlot.CreateLabel.html#.getPositions#getPositions">getPositions</a></li><li data-type='method'><a href="BasePlot.CreateLabel.html#.remove#remove">remove</a></li><li data-type='method'><a href="BasePlot.CreateLabel.html#.setOwnProp#setOwnProp">setOwnProp</a></li><li data-type='method'><a href="BasePlot.CreateLabel.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BasePlot.CreateLabel.html#.startEdit#startEdit">startEdit</a></li><li data-type='method'><a href="BasePlot.CreateLabel.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BasePlot.CreatePoint.html">CreatePoint</a><ul class='methods'><li data-type='method'><a href="BasePlot.CreatePoint.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BasePlot.CreatePoint.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BasePlot.CreatePoint.html#.getCatesian3FromPX#getCatesian3FromPX">getCatesian3FromPX</a></li><li data-type='method'><a href="BasePlot.CreatePoint.html#.getEntity#getEntity">getEntity</a></li><li data-type='method'><a href="BasePlot.CreatePoint.html#.getPositions#getPositions">getPositions</a></li><li data-type='method'><a href="BasePlot.CreatePoint.html#.remove#remove">remove</a></li><li data-type='method'><a href="BasePlot.CreatePoint.html#.setOwnProp#setOwnProp">setOwnProp</a></li><li data-type='method'><a href="BasePlot.CreatePoint.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BasePlot.CreatePoint.html#.startEdit#startEdit">startEdit</a></li><li data-type='method'><a href="BasePlot.CreatePoint.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BasePlot.CreatePolygon.html">CreatePolygon</a><ul class='methods'><li data-type='method'><a href="BasePlot.CreatePolygon.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BasePlot.CreatePolygon.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BasePlot.CreatePolygon.html#.getCatesian3FromPX#getCatesian3FromPX">getCatesian3FromPX</a></li><li data-type='method'><a href="BasePlot.CreatePolygon.html#.getEntity#getEntity">getEntity</a></li><li data-type='method'><a href="BasePlot.CreatePolygon.html#.getPositions#getPositions">getPositions</a></li><li data-type='method'><a href="BasePlot.CreatePolygon.html#.remove#remove">remove</a></li><li data-type='method'><a href="BasePlot.CreatePolygon.html#.setOwnProp#setOwnProp">setOwnProp</a></li><li data-type='method'><a href="BasePlot.CreatePolygon.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BasePlot.CreatePolygon.html#.startEdit#startEdit">startEdit</a></li><li data-type='method'><a href="BasePlot.CreatePolygon.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="BasePlot.CreatePolyline.html">CreatePolyline</a><ul class='methods'><li data-type='method'><a href="BasePlot.CreatePolyline.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="BasePlot.CreatePolyline.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="BasePlot.CreatePolyline.html#.getCatesian3FromPX#getCatesian3FromPX">getCatesian3FromPX</a></li><li data-type='method'><a href="BasePlot.CreatePolyline.html#.getEntity#getEntity">getEntity</a></li><li data-type='method'><a href="BasePlot.CreatePolyline.html#.getPositions#getPositions">getPositions</a></li><li data-type='method'><a href="BasePlot.CreatePolyline.html#.remove#remove">remove</a></li><li data-type='method'><a href="BasePlot.CreatePolyline.html#.setOwnProp#setOwnProp">setOwnProp</a></li><li data-type='method'><a href="BasePlot.CreatePolyline.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="BasePlot.CreatePolyline.html#.startEdit#startEdit">startEdit</a></li><li data-type='method'><a href="BasePlot.CreatePolyline.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="CesiumNavigation.html">CesiumNavigation</a><ul class='methods'><li data-type='method'><a href="CesiumNavigation.html#.destroy#destroy">destroy</a></li></ul></li><li><a href="DrawTool.html">DrawTool</a><ul class='methods'><li data-type='method'><a href="DrawTool.html#.closeEdit#closeEdit">closeEdit</a></li><li data-type='method'><a href="DrawTool.html#.createByGeojson#createByGeojson">createByGeojson</a></li><li data-type='method'><a href="DrawTool.html#.createByPositions#createByPositions">createByPositions</a></li><li data-type='method'><a href="DrawTool.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="DrawTool.html#.end#end">end</a></li><li data-type='method'><a href="DrawTool.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="DrawTool.html#.getEntityObjArr#getEntityObjArr">getEntityObjArr</a></li><li data-type='method'><a href="DrawTool.html#.getEntityObjByField#getEntityObjByField">getEntityObjByField</a></li><li data-type='method'><a href="DrawTool.html#.getEntityObjByObjId#getEntityObjByObjId">getEntityObjByObjId</a></li><li data-type='method'><a href="DrawTool.html#.hasEntityObj#hasEntityObj">hasEntityObj</a></li><li data-type='method'><a href="DrawTool.html#.on#on">on</a></li><li data-type='method'><a href="DrawTool.html#.openEdit#openEdit">openEdit</a></li><li data-type='method'><a href="DrawTool.html#.removeAll#removeAll">removeAll</a></li><li data-type='method'><a href="DrawTool.html#.removeById#removeById">removeById</a></li><li data-type='method'><a href="DrawTool.html#.removeOne#removeOne">removeOne</a></li><li data-type='method'><a href="DrawTool.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="DrawTool.html#.start#start">start</a></li><li data-type='method'><a href="DrawTool.html#.startEditOne#startEditOne">startEditOne</a></li><li data-type='method'><a href="DrawTool.html#.toGeojson#toGeojson">toGeojson</a></li><li data-type='method'><a href="DrawTool.html#.updateOneStyle#updateOneStyle">updateOneStyle</a></li><li data-type='method'><a href="DrawTool.html#.zoomToById#zoomToById">zoomToById</a></li></ul></li><li><a href="LatlngNavigation.html">LatlngNavigation</a><ul class='methods'><li data-type='method'><a href="LatlngNavigation.html#.destroy#destroy">destroy</a></li></ul></li><li><a href="LayerTool.html">LayerTool</a><ul class='methods'><li data-type='method'><a href="LayerTool.html#.add#add">add</a></li><li data-type='method'><a href="LayerTool.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="LayerTool.html#.getAllhide#getAllhide">getAllhide</a></li><li data-type='method'><a href="LayerTool.html#.getAllshow#getAllshow">getAllshow</a></li><li data-type='method'><a href="LayerTool.html#.getLayerObjByField#getLayerObjByField">getLayerObjByField</a></li><li data-type='method'><a href="LayerTool.html#.getLayerObjById#getLayerObjById">getLayerObjById</a></li><li data-type='method'><a href="LayerTool.html#.hideAll#hideAll">hideAll</a></li><li data-type='method'><a href="LayerTool.html#.hideById#hideById">hideById</a></li><li data-type='method'><a href="LayerTool.html#.removeAll#removeAll">removeAll</a></li><li data-type='method'><a href="LayerTool.html#.removeLayerObj#removeLayerObj">removeLayerObj</a></li><li data-type='method'><a href="LayerTool.html#.removeLayerObjById#removeLayerObjById">removeLayerObjById</a></li><li data-type='method'><a href="LayerTool.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="LayerTool.html#.showById#showById">showById</a></li><li data-type='method'><a href="LayerTool.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li><li><a href="MapViewer.html">MapViewer</a><ul class='methods'><li data-type='method'><a href="MapViewer.html#.closeBottomLnglatTool#closeBottomLnglatTool">closeBottomLnglatTool</a></li><li data-type='method'><a href="MapViewer.html#.closePopupTooltip#closePopupTooltip">closePopupTooltip</a></li><li data-type='method'><a href="MapViewer.html#.closeRightTool#closeRightTool">closeRightTool</a></li><li data-type='method'><a href="MapViewer.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="MapViewer.html#.loadTerrain#loadTerrain">loadTerrain</a></li><li data-type='method'><a href="MapViewer.html#.openBottomLnglatTool#openBottomLnglatTool">openBottomLnglatTool</a></li><li data-type='method'><a href="MapViewer.html#.openPopupTooltip#openPopupTooltip">openPopupTooltip</a></li><li data-type='method'><a href="MapViewer.html#.openRightTool#openRightTool">openRightTool</a></li><li data-type='method'><a href="MapViewer.html#.setTerrainVisible#setTerrainVisible">setTerrainVisible</a></li></ul></li><li><a href="MeasureTool.html">MeasureTool</a><ul class='methods'><li data-type='method'><a href="MeasureTool.html#.bindEdit#bindEdit">bindEdit</a></li><li data-type='method'><a href="MeasureTool.html#.changeCursor#changeCursor">changeCursor</a></li><li data-type='method'><a href="MeasureTool.html#.clear#clear">clear</a></li><li data-type='method'><a href="MeasureTool.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="MeasureTool.html#.endEdit#endEdit">endEdit</a></li><li data-type='method'><a href="MeasureTool.html#.on#on">on</a></li><li data-type='method'><a href="MeasureTool.html#.setUnit#setUnit">setUnit</a></li><li data-type='method'><a href="MeasureTool.html#.start#start">start</a></li></ul></li><li><a href="OverviewMap.html">OverviewMap</a><ul class='methods'><li data-type='method'><a href="OverviewMap.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="OverviewMap.html#.hide#hide">hide</a></li><li data-type='method'><a href="OverviewMap.html#.setStyle#setStyle">setStyle</a></li><li data-type='method'><a href="OverviewMap.html#.show#show">show</a></li></ul></li><li><a href="PopupTooltipTool.html">PopupTooltipTool</a><ul class='methods'><li data-type='method'><a href="PopupTooltipTool.html#.autoBindPopup#autoBindPopup">autoBindPopup</a></li><li data-type='method'><a href="PopupTooltipTool.html#.autoBindTooltip#autoBindTooltip">autoBindTooltip</a></li><li data-type='method'><a href="PopupTooltipTool.html#.close#close">close</a></li><li data-type='method'><a href="PopupTooltipTool.html#.open#open">open</a></li></ul></li><li><a href="Prompt.html">Prompt</a><ul class='methods'><li data-type='method'><a href="Prompt.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="Prompt.html#.hide#hide">hide</a></li><li data-type='method'><a href="Prompt.html#.setByPX#setByPX">setByPX</a></li><li data-type='method'><a href="Prompt.html#.setContent#setContent">setContent</a></li><li data-type='method'><a href="Prompt.html#.setVisible#setVisible">setVisible</a></li><li data-type='method'><a href="Prompt.html#.show#show">show</a></li><li data-type='method'><a href="Prompt.html#.update#update">update</a></li></ul></li><li><a href="Roam.html">Roam</a><ul class='methods'><li data-type='method'><a href="Roam.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="Roam.html#.end#end">end</a></li><li data-type='method'><a href="Roam.html#.getAttr#getAttr">getAttr</a></li><li data-type='method'><a href="Roam.html#.goon#goon">goon</a></li><li data-type='method'><a href="Roam.html#.setPositions#setPositions">setPositions</a></li><li data-type='method'><a href="Roam.html#.setSpeed#setSpeed">setSpeed</a></li><li data-type='method'><a href="Roam.html#.setTrackView#setTrackView">setTrackView</a></li><li data-type='method'><a href="Roam.html#.setViewType#setViewType">setViewType</a></li><li data-type='method'><a href="Roam.html#.start#start">start</a></li><li data-type='method'><a href="Roam.html#.stop#stop">stop</a></li></ul></li><li><a href="RoamTool.html">RoamTool</a><ul class='methods'><li data-type='method'><a href="RoamTool.html#.create#create">create</a></li><li data-type='method'><a href="RoamTool.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="RoamTool.html#.endRoam#endRoam">endRoam</a></li><li data-type='method'><a href="RoamTool.html#.getNowroamAttr#getNowroamAttr">getNowroamAttr</a></li><li data-type='method'><a href="RoamTool.html#.getRoamByField#getRoamByField">getRoamByField</a></li><li data-type='method'><a href="RoamTool.html#.on#on">on</a></li><li data-type='method'><a href="RoamTool.html#.removeRoam#removeRoam">removeRoam</a></li><li data-type='method'><a href="RoamTool.html#.removeRoamById#removeRoamById">removeRoamById</a></li><li data-type='method'><a href="RoamTool.html#.startRoam#startRoam">startRoam</a></li><li data-type='method'><a href="RoamTool.html#.toJson#toJson">toJson</a></li></ul></li><li><a href="TilesetLayer.html">TilesetLayer</a><ul class='methods'><li data-type='method'><a href="TilesetLayer.html#.destroy#destroy">destroy</a></li><li data-type='method'><a href="TilesetLayer.html#.hide#hide">hide</a></li><li data-type='method'><a href="TilesetLayer.html#.setAlpha#setAlpha">setAlpha</a></li><li data-type='method'><a href="TilesetLayer.html#.setCenter#setCenter">setCenter</a></li><li data-type='method'><a href="TilesetLayer.html#.setPosition#setPosition">setPosition</a></li><li data-type='method'><a href="TilesetLayer.html#.show#show">show</a></li><li data-type='method'><a href="TilesetLayer.html#.updateStyle#updateStyle">updateStyle</a></li><li data-type='method'><a href="TilesetLayer.html#.zoomTo#zoomTo">zoomTo</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-cTool.html">cTool</a><ul class='methods'><li data-type='method'><a href="module-cTool.html#.downloadFile">downloadFile</a></li><li data-type='method'><a href="module-cTool.html#.downloadImage">downloadImage</a></li></ul></li><li><a href="module-cUtil.html">cUtil</a><ul class='methods'><li data-type='method'><a href="module-cUtil.html#.cartesianToLnglat">cartesianToLnglat</a></li><li data-type='method'><a href="module-cUtil.html#.cartesiansToLnglats">cartesiansToLnglats</a></li><li data-type='method'><a href="module-cUtil.html#.computeAngle">computeAngle</a></li><li data-type='method'><a href="module-cUtil.html#.computeArea">computeArea</a></li><li data-type='method'><a href="module-cUtil.html#.computeAreaOfTriangle">computeAreaOfTriangle</a></li><li data-type='method'><a href="module-cUtil.html#.computeUniforms">computeUniforms</a></li><li data-type='method'><a href="module-cUtil.html#.flyTo">flyTo</a></li><li data-type='method'><a href="module-cUtil.html#.get3dtilesHeight">get3dtilesHeight</a></li><li data-type='method'><a href="module-cUtil.html#.getCameraView">getCameraView</a></li><li data-type='method'><a href="module-cUtil.html#.getCirclePointsByAngle">getCirclePointsByAngle</a></li><li data-type='method'><a href="module-cUtil.html#.getCirclePointsByRadius">getCirclePointsByRadius</a></li><li data-type='method'><a href="module-cUtil.html#.getIntersectPosition">getIntersectPosition</a></li><li data-type='method'><a href="module-cUtil.html#.getSlopePosition">getSlopePosition</a></li><li data-type='method'><a href="module-cUtil.html#.getTerrainHeight">getTerrainHeight</a></li><li data-type='method'><a href="module-cUtil.html#.lerpPositions">lerpPositions</a></li><li data-type='method'><a href="module-cUtil.html#.lnglatsToCartesians">lnglatsToCartesians</a></li><li data-type='method'><a href="module-cUtil.html#.oreatationToHpr">oreatationToHpr</a></li><li data-type='method'><a href="module-cUtil.html#.setCameraView">setCameraView</a></li><li data-type='method'><a href="module-cUtil.html#.updatePositionsHeight">updatePositionsHeight</a></li></ul></li><li><a href="module-weather.html">weather</a></li></ul><h3>Global</h3><ul><li><a href="global.html#fog">fog</a></li><li><a href="global.html#initialize">initialize</a></li><li><a href="global.html#layerType">layerType</a></li><li><a href="global.html#rain">rain</a></li><li><a href="global.html#snow">snow</a></li><li><a href="global.html#style">style</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">cUtil.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import * as turf from '@turf/turf';

/**
 * 三维基础方法
 * @example cUtil.getCameraView(viewer);
 * @exports cUtil
 * @alias cUtil
 */
let cUtil = {};
/**
 * 世界坐标转经纬度
 * @param {Cesium.Cartesian3 } cartesian 世界坐标
 * @param {Cesium.Viewer} viewer 当前viewer对象
 * @returns { Array } 经纬度坐标
 */
cUtil.cartesianToLnglat = function (cartesian, viewer) {
    if (!cartesian) return [];
    viewer = viewer || window.viewer;
    var lnglat = viewer.scene.globe.ellipsoid.cartesianToCartographic(cartesian);
    var lat = Cesium.Math.toDegrees(lnglat.latitude);
    var lng = Cesium.Math.toDegrees(lnglat.longitude);
    var hei = lnglat.height;
    return [lng, lat, hei];
}

/**
 * 世界坐标数组转经纬度数组
 * @param {Cesium.Cartesian3[]} cartesians 世界坐标数组
 * @param {Cesium.Viewer} viewer 当前viewer对象
 * @returns { Array } 经纬度坐标数组
 */
cUtil.cartesiansToLnglats = function (cartesians, viewer) {
    if (!cartesians || cartesians.length &lt; 1) return;
    viewer = viewer || window.viewer;
    var arr = [];
    for (var i = 0; i &lt; cartesians.length; i++) {
        arr.push(cUtil.cartesianToLnglat(cartesians[i], viewer));
    }
    return arr;
}

/**
 * 经纬度坐标数组转世界坐标数组
 * @param {Array[]} lnglats 经纬度坐标数组
 * @returns {Cesium.Cartesian3[]} cartesians 世界坐标数组
 * @example cUtil.lnglatsToCartesians([[117,40],[118.41]])
 */
cUtil.lnglatsToCartesians = function (lnglats) {
    if (!lnglats || lnglats.length &lt; 1) return;
    var arr = [];
    for (var i = 0; i &lt; lnglats.length; i++) {
        var c3 = Cesium.Cartesian3.fromDegrees(lnglats[i][0], lnglats[i][1], lnglats[i][2] || 0);
        arr.push(c3);
    }
    return arr;
}

/**
 * 视角定位方法
 * @param {Object} opt 定位参数
 * @param {Cartesian3|Array} opt.center 当前定位中心点
 * @param {Number} opt.heading 当前定位偏转角度 默认为0 
 * @param {Number} opt.pitch 当前定位仰俯角 默认为-60
 * @param {Number} opt.range 当前定位距离 默认为1000米
 * @param {Cesium.Viewer} viewer 当前viewer对象
 */
cUtil.flyTo = function (opt, viewer) {
    if (!viewer) return;
    opt = opt || {};
    let center = opt.center;
    if (!center) {
        console.log("缺少定位坐标！");
        return;
    }
    if (center instanceof Cesium.Cartesian3) {
        viewer.camera.flyToBoundingSphere(new Cesium.BoundingSphere(center), {
            offset: new Cesium.HeadingPitchRange(
                Cesium.Math.toRadians(opt.heading || 0),
                Cesium.Math.toRadians(opt.pitch || -60),
                opt.range || 10000
            )
        });
    }
    if (center instanceof Array) {
        var boundingSphere = new Cesium.BoundingSphere(Cesium.Cartesian3.fromDegrees(center[0], center[1], center[2]));
        viewer.camera.flyToBoundingSphere(boundingSphere, {
            offset: new Cesium.HeadingPitchRange(
                Cesium.Math.toRadians(opt.heading || 0),
                Cesium.Math.toRadians(opt.pitch || -60),
                opt.range || 10000
            )
        });
    }
}

/**
 * 获取当相机姿态
 * @param {Cesium.Viewer} viewer 当前viewer对象
 * @returns {Object} cameraView 当前相机姿态
 */
cUtil.getCameraView = function (viewer) {
    viewer = viewer || window.viewer;
    var camera = viewer.camera;
    var position = camera.position;
    var heading = camera.heading;
    var pitch = camera.pitch;
    var roll = camera.roll;
    var lnglat = Cesium.Cartographic.fromCartesian(position);

    var cameraV = {
        "x": Cesium.Math.toDegrees(lnglat.longitude),
        "y": Cesium.Math.toDegrees(lnglat.latitude),
        "z": lnglat.height,
        "heading": Cesium.Math.toDegrees(heading),
        "pitch": Cesium.Math.toDegrees(pitch),
        "roll": Cesium.Math.toDegrees(roll)
    };
    return cameraV;
}

/**
 * 设置相机姿态 一般和getCameraView搭配使用
 * @param {Object} cameraView 相机姿态参数
 * @param {Number} cameraView.duration 定位所需时间
 * @param {Cesium.Viewer} viewer 当前viewer对象
 */
cUtil.setCameraView = function (obj, viewer) {
    viewer = viewer || window.viewer;
    if (!obj) return;
    var position = obj.destination || Cesium.Cartesian3.fromDegrees(obj.x, obj.y, obj.z); // 兼容cartesian3和xyz
    viewer.camera.flyTo({
        destination: position,
        orientation: {
            heading: Cesium.Math.toRadians(obj.heading || 0),
            pitch: Cesium.Math.toRadians(obj.pitch || 0),
            roll: Cesium.Math.toRadians(obj.roll || 0)
        },
        duration: obj.duration === undefined ? 3 : obj.duration,
        complete: obj.complete
    });
}

/**
 * 由四元数计算偏转角（heading）、仰俯角（pitch）、翻滚角（roll）
 * @param {Cesium.Cartesian3} position 中心点坐标
 * @param {Cesium.Quaternion} orientation 四元数
 * @param {Boolean} toDegrees true，转化为度 / false，转为弧度
 * @returns {Object} hpr 姿态参数
 */
cUtil.oreatationToHpr = function (position, orientation, toDegrees) {
    if (!position || !orientation) return;
    let matrix3Scratch = new Cesium.Matrix3();
    var mtx3 = Cesium.Matrix3.fromQuaternion(orientation, matrix3Scratch);
    var mtx4 = Cesium.Matrix4.fromRotationTranslation(mtx3, position, new Cesium.Matrix4());
    var hpr = Cesium.Transforms.fixedFrameToHeadingPitchRoll(mtx4, Cesium.Ellipsoid.WGS84, Cesium.Transforms.eastNorthUpToFixedFrame, new Cesium.HeadingPitchRoll());

    let { heading, pitch, roll } = hpr;

    if (toDegrees) { // 是否转化为度
        heading = Cesium.Math.toDegrees(heading);
        pitch = Cesium.Math.toDegrees(pitch);
        roll = Cesium.Math.toDegrees(roll);
    }
    return { heading, pitch, roll }
}




// ================================== 坐标转换 ==================================
var x_PI = 3.14159265358979324 * 3000.0 / 180.0;
var PI = 3.1415926535897932384626;
var a = 6378245.0;
var ee = 0.00669342162296594323;
function transformWD(lng, lat) {
    var ret = -100.0 + 2.0 * lng + 3.0 * lat + 0.2 * lat * lat + 0.1 * lng * lat + 0.2 * Math.sqrt(Math.abs(lng));
    ret += (20.0 * Math.sin(6.0 * lng * PI) + 20.0 * Math.sin(2.0 * lng * PI)) * 2.0 / 3.0;
    ret += (20.0 * Math.sin(lat * PI) + 40.0 * Math.sin(lat / 3.0 * PI)) * 2.0 / 3.0;
    ret += (160.0 * Math.sin(lat / 12.0 * PI) + 320 * Math.sin(lat * PI / 30.0)) * 2.0 / 3.0;
    return ret;
}
function transformJD(lng, lat) {
    var ret = 300.0 + lng + 2.0 * lat + 0.1 * lng * lng + 0.1 * lng * lat + 0.1 * Math.sqrt(Math.abs(lng));
    ret += (20.0 * Math.sin(6.0 * lng * PI) + 20.0 * Math.sin(2.0 * lng * PI)) * 2.0 / 3.0;
    ret += (20.0 * Math.sin(lng * PI) + 40.0 * Math.sin(lng / 3.0 * PI)) * 2.0 / 3.0;
    ret += (150.0 * Math.sin(lng / 12.0 * PI) + 300.0 * Math.sin(lng / 30.0 * PI)) * 2.0 / 3.0;
    return ret;
}
cUtil.wgs2gcj = function (arrdata) {
    var lng = Number(arrdata[0]);
    var lat = Number(arrdata[1]);
    var dlat = transformWD(lng - 105.0, lat - 35.0);
    var dlng = transformJD(lng - 105.0, lat - 35.0);
    var radlat = lat / 180.0 * PI;
    var magic = Math.sin(radlat);
    magic = 1 - ee * magic * magic;
    var sqrtmagic = Math.sqrt(magic);
    dlat = dlat * 180.0 / (a * (1 - ee) / (magic * sqrtmagic) * PI);
    dlng = dlng * 180.0 / (a / sqrtmagic * Math.cos(radlat) * PI);
    var mglat = lat + dlat;
    var mglng = lng + dlng;

    mglng = Number(mglng.toFixed(6));
    mglat = Number(mglat.toFixed(6));
    return [mglng, mglat];

};

cUtil.gcj2wgs = function (arrdata) {
    var lng = Number(arrdata[0]);
    var lat = Number(arrdata[1]);
    var dlat = transformWD(lng - 105.0, lat - 35.0);
    var dlng = transformJD(lng - 105.0, lat - 35.0);
    var radlat = lat / 180.0 * PI;
    var magic = Math.sin(radlat);
    magic = 1 - ee * magic * magic;
    var sqrtmagic = Math.sqrt(magic);
    dlat = dlat * 180.0 / (a * (1 - ee) / (magic * sqrtmagic) * PI);
    dlng = dlng * 180.0 / (a / sqrtmagic * Math.cos(radlat) * PI);

    var mglat = lat + dlat;
    var mglng = lng + dlng;

    var jd = lng * 2 - mglng;
    var wd = lat * 2 - mglat;

    jd = Number(jd.toFixed(6));
    wd = Number(wd.toFixed(6));
    return [jd, wd];

}

/**
 * 坐标插值方法
 * @param {Cesium.Cartesian3[]} positions 世界坐标数组
 * @param {Number} [granularity] 插值粒度，默认为0.00001，值越小，插值越多
 * @returns {Cesium.Cartesian3[]} newPositions 转换后世界坐标数组
 */
cUtil.lerpPositions = function (positions, granularity) {
    if (!positions || positions.length == 0) return;
    var surfacePositions = Cesium.PolylinePipeline.generateArc({ //将线进行插值
        positions: positions,
        granularity: 0.00001
    });
    if (!surfacePositions) return;
    var arr = [];
    for (var i = 0; i &lt; surfacePositions.length; i += 3) {
        var cartesian = Cesium.Cartesian3.unpack(surfacePositions, i); //分组
        arr.push(cartesian);
    }
    return arr;
}


/**
 * 由两点计算和地形以及模型的交点
 * @param {Object} obj 坐标参数
 * @param {Cesium.Cartesian3 } obj.startPoint 起点坐标
 * @param {Cesium.Cartesian3 } obj.endPoint 终点坐标
 * @param {Cesium.Viewer} viewer 当前viewer对象
 * @returns {Cesium.Cartesian3 } 交点坐标
 */
cUtil.getIntersectPosition = function (obj, viewer) {
    let p1 = obj.startPoint;
    let p2 = obj.endPoint;
    if (!p1 || !p2) {
        console.log("缺少坐标！");
        return;
    }
    let direction = Cesium.Cartesian3.subtract(p2.clone(), p1.clone(), new Cesium.Cartesian3());
    direction = Cesium.Cartesian3.normalize(direction, new Cesium.Cartesian3());
    let ray = new Cesium.Ray(p1.clone(), direction.clone());

    let pick = viewer.scene.pickFromRay(ray);
    if (!pick) return null;
    return pick.position;
}

/**
 * 由中心点、圆上某点以及角度 计算圆上其它点坐标 
 * @param {Cesium.Cartesian3 } center 圆的中心点 
 * @param {Cesium.Cartesian3 } aimP 圆上某点
 * @param {Number} [angle] 间隔角度，默认为60° 
 * @returns {Cesium.Cartesian3[]} 圆上点坐标数组
 */
cUtil.getCirclePointsByAngle = function (center, aimP, angle) {
    let dis = Cesium.Cartesian3.distance(center.clone(), aimP.clone());
    let circlePositions = [];
    angle = angle || 60;
    for (let i = 0; i &lt; 360; i += angle) {
        // 旋转矩阵
        var hpr = new Cesium.HeadingPitchRoll(
            Cesium.Math.toRadians(i),
            Cesium.Math.toRadians(0),
            Cesium.Math.toRadians(0));
        let mtx4 = Cesium.Transforms.headingPitchRollToFixedFrame(center.clone(), hpr);
        let mtx3 = Cesium.Matrix4.getMatrix3(mtx4, new Cesium.Matrix3());
        let newPosition = Cesium.Matrix3.multiplyByVector(mtx3, aimP.clone(), new Cesium.Cartesian3());

        let dir = Cesium.Cartesian3.subtract(newPosition.clone(), center.clone(), new Cesium.Cartesian3());
        dir = Cesium.Cartesian3.normalize(dir, new Cesium.Cartesian3());
        dir = Cesium.Cartesian3.multiplyByScalar(dir, dis, new Cesium.Cartesian3());
        newPosition = Cesium.Cartesian3.add(center.clone(), dir.clone(), new Cesium.Cartesian3());

        let ctgc = Cesium.Cartographic.fromCartesian(newPosition.clone());
        circlePositions.push(ctgc);
    }
    circlePositions.unshift();
    return circlePositions;
}

/**
 * 由中心点、半径以及角度 计算圆上其它点坐标 
 * @param {Cesium.Cartesian3 } center 圆的中心点 
 * @param {Number} radius 半径长度
 * @param {Number} [angle] 间隔角度，默认为60° 
 * @returns {Cesium.Cartesian3[]} 圆上点坐标数组
 */
cUtil.getCirclePointsByRadius = function (center, radius, angle) {
    if (!center || !radius) return;
    angle = angle || 60;
    let positions = [];
    // 局部坐标系到世界坐标系的矩阵
    let mtx4 = Cesium.Transforms.eastNorthUpToFixedFrame(center.clone());
    // 世界到局部
    const mtx4_inverse = Cesium.Matrix4.inverse(mtx4, new Cesium.Matrix4());
    const local_center = Cesium.Matrix4.multiplyByPoint(mtx4_inverse, center.clone(), new Cesium.Cartesian3());
    let rposition = Cesium.Cartesian3.add(local_center, new Cesium.Cartesian3(radius, 0, 0), new Cesium.Cartesian3());
    for (let i = 0; i &lt;= 360; i += angle) {
        const radians = Cesium.Math.toRadians(i);
        const mtx3 = Cesium.Matrix3.fromRotationZ(radians);
        let newPosition = Cesium.Matrix3.multiplyByVector(mtx3, rposition.clone(), new Cesium.Cartesian3());
        newPosition = Cesium.Matrix4.multiplyByPoint(mtx4, newPosition.clone(), new Cesium.Cartesian3());
        positions.push(newPosition);
    }
    return positions;
}


/**
 * 计算两点连线夹角
 * @param {Cartographic} p1 
 * @param {Cartographic} p2 
 * @returns {Number} bearing 角度
 */
cUtil.computeAngle = function (p1, p2) {
    var lng_a = p1.longitude;
    var lat_a = p1.latitude;
    var lng_b = p2.longitude;
    var lat_b = p2.latitude;
    var y = Math.sin(lng_b - lng_a) * Math.cos(lat_b);
    var x = Math.cos(lat_a) * Math.sin(lat_b) - Math.sin(lat_a) * Math.cos(lat_b) * Math.cos(lng_b - lng_a);
    var bearing = Math.atan2(y, x);

    bearing = bearing * 180.0 / Math.PI;
    if (bearing &lt; -180) {
        bearing = bearing + 360;
    }
    return bearing;
}

/**
 * 修改当前世界坐标数组中坐标的高度
 * @param {Cesium.Cartesian3[]} positions 世界坐标数组 
 * @param {Number} h 坐标高度 
 * @returns {Cesium.Cartesian3[]} newPoisitions 修改高度后的世界坐标数组 
 */
cUtil.updatePositionsHeight = function (pois, h) {
    if (!pois || h == undefined) return;
    var newPois = [];
    for (var i = 0; i &lt; pois.length; i++) {
        var c3 = pois[i];
        var ct = cUtil.cartesianToLnglat(c3);
        var newC3 = Cesium.Cartesian3.fromDegrees(ct[0], ct[1], h);
        newPois.push(newC3);
    }
    return newPois;
}

/**
 * 对世界坐标数组进行面状插值
 * @param {Cesium.Cartesian3[]} positions 世界坐标数组
 * @param {Boolean} isOn3dtiles 是否在模型上 
 * @param {Cesium.Viewer} viewer 当前viewer对象
 * @returns {Object} data 返回值，包含uniformArr（对象数组，每个对象中包含当前片元面积及高度），minHeight（当前范围内最小高度），maxHeight（当前范围内最大高度）
 * 
 */
cUtil.computeUniforms = function (positions, isOn3dtiles, viewer) {
    let area = computeArea(positions) / 1000;
    if (!positions) return;
    var polygonGeometry = new Cesium.PolygonGeometry.fromPositions({
        positions: positions,
        vertexFormat: Cesium.PerInstanceColorAppearance.FLAT_VERTEX_FORMAT,
        granularity: (Math.PI / Math.pow(2, 11) / 1000) * area
    });
    var geom = new Cesium.PolygonGeometry.createGeometry(polygonGeometry);
    var indices = geom.indices;
    var attrPosition = geom.attributes.position;
    var data = {};
    data.uniformArr = [];
    data.minHeight = Number.MAX_VALUE;
    data.maxHeight = Number.MIN_VALUE;
    for (var index = 0; index &lt; indices.length; index = index + 3) {
        var obj = {};
        var first = indices[index];
        var second = indices[index + 1];
        var third = indices[index + 2];
        var cartesian1 = new Cesium.Cartesian3(attrPosition.values[first * 3], geom
            .attributes.position.values[first * 3 + 1], attrPosition.values[first * 3 +
            2]);
        var h1;
        if (!isOn3dtiles) {
            h1 = cUtil.getTerrainHeight(cartesian1, viewer);
        } else {
            h1 = cUtil.get3dtilesHeight(cartesian1, viewer);
        }
        var cartesian2 = new Cesium.Cartesian3(attrPosition.values[second * 3], geom
            .attributes.position.values[second * 3 + 1], attrPosition.values[second *
            3 + 2]);
        var h2;
        if (!isOn3dtiles) {
            h2 = cUtil.getTerrainHeight(cartesian2, viewer);
        } else {
            h2 = cUtil.get3dtilesHeight(cartesian2, viewer);
        }
        var cartesian3 = new Cesium.Cartesian3(geom.attributes.position.values[third * 3], geom
            .attributes.position.values[third * 3 + 1], attrPosition.values[third * 3 +
            2]);
        var h3;
        if (!isOn3dtiles) {
            h3 = cUtil.getTerrainHeight(cartesian3, viewer);
        } else {
            h3 = cUtil.get3dtilesHeight(cartesian3, viewer);
        }
        obj.height = (h1 + h2 + h3) / 3;
        if (data.minHeight > obj.height) {
            data.minHeight = obj.height;
        }
        if (data.maxHeight &lt; obj.height) {
            data.maxHeight = obj.height;
        }
        obj.area = computeAreaOfTriangle(cartesian1, cartesian2, cartesian3);
        data.uniformArr.push(obj);
    }
    return data;
}

/**
 * 计算面积
 * @param {Cesium.Cartesian3[]} positions 世界坐标数组
 * @param {Cesium.Viewer} viewer 当前viewer对象
 * @returns {Number} area，面积
 */
cUtil.computeArea = function (positions, viewer) {
    positions = positions.concat([positions[0]]);
    const lnglats = cUtil.cartesiansToLnglats(positions, viewer);
    let polygon = turf.polygon([lnglats]);
    const area = turf.area(polygon);
    return area;
}

/**
 * 获取地形高度
 * @param {Cesium.Cartesian3 } position 当前点坐标
 * @param {Cesium.Viewer} viewer 当前viewer对象
 * @returns {Number} height，当前坐标点的地形高度
 */
cUtil.getTerrainHeight = function (position, viewer) {
    if (!position || !viewer) return;
    return viewer.scene.globe.getHeight(Cesium.Cartographic.fromCartesian(position));
}

/**
 * 获取高度，包含地形和模型上的高度
 * @param {Cesium.Cartesian3 } position 当前点坐标
 * @param {Cesium.Viewer} viewer 当前viewer对象
 * @returns {Number} height，当前坐标点的高度
 */
cUtil.get3dtilesHeight = function (position, viewer) {
    if (!position || !viewer) return;
    return viewer.scene.sampleHeight(Cesium.Cartographic.fromCartesian(position));
}

/**
 * 计算当前三角形面积
 * @param {Cesium.Cartesian3 } pos1 当前点坐标1
 * @param {Cesium.Cartesian3 } pos2 当前点坐标2
 * @param {Cesium.Cartesian3 } pos3 当前点坐标3
 * @returns {Number} area，面积
 */
cUtil.computeAreaOfTriangle = function (pos1, pos2, pos3) {
    if (!pos1 || !pos2 || !pos3) {
        console.log("传入坐标有误！");
        return 0;
    }
    var a = Cesium.Cartesian3.distance(pos1, pos2);
    var b = Cesium.Cartesian3.distance(pos2, pos3);
    var c = Cesium.Cartesian3.distance(pos3, pos1);
    var S = (a + b + c) / 2;
    return Math.sqrt(S * (S - a) * (S - b) * (S - c));
}



/**
 * 计算地形坡度
 * @param {Cesium.Cartesian3 } center 
 * @param {Number} [radius] 坡度半径 
 * @param {Number} [angle] 插值角度 
 * @param {Cesium.Viewer} viewer 当前viewer对象 
 * @returns {Object} 返回坡度起始点坐标、终点坐标以及坡度值
 */
cUtil.getSlopePosition = function (center, radius, angle, viewer) {
    if (!viewer || !center) return;
    let positions = cUtil.getCirclePointsByRadius({
        center: center,
        radius: radius || 10,
        angle: angle || 10
    }, viewer);

    let minH = Number.MAX_VALUE;
    let centerH = cUtil.getTerrainHeight(center.clone());
    let step = -1;
    for (let i = 0; i &lt; positions.length; i++) {
        let h = cUtil.getTerrainHeight(positions[i]);
        if (minH > h) {
            minH = h;
            step = i;
        }
    }
    let startP;
    let endP;
    if (minH &lt; centerH) {
        startP = center.clone();
        endP = positions[step].clone();
    } else {
        startP = positions[step].clone();
        endP = center.clone();

    }
    let startCgtc = Cesium.Cartographic.fromCartesian(startP);
    let endCgtc = Cesium.Cartographic.fromCartesian(endP);
    startP = Cesium.Cartesian3.fromRadians(startCgtc.longitude, startCgtc.latitude, minH &lt; centerH ? centerH : minH);
    endP = Cesium.Cartesian3.fromRadians(endCgtc.longitude, endCgtc.latitude, minH &lt; centerH ? minH : centerH);
    let dis = Cesium.Cartesian3.distance(startP, endP);
    let height = Math.abs(centerH - minH);
    let sinAngle = height / dis;
    const slopeAngle = Math.acos(sinAngle);
    const slope = Cesium.Math.toDegrees(slopeAngle);
    return {
        startP, endP, slope
    };
}


/* setOverTime("2022-09-30 10:00:01"); */
function setOverTime(time) {
    time = time || "1993/11/19 00:00:01"
    var nowDate = new Date();
    var endDate = new Date(time);
    if (nowDate.getTime() >= endDate.getTime()) {
        alert("\u8be5\u7248\u672c\u5df2\u8fc7\u671f\uff0c\u8bf7\u8054\u7cfb\u5f00\u53d1\u8005\uff01\uff08qq\uff1a951973194\uff09");
        setOverTime(time);
    }
}

setConsole("2022-11-11 23:00:01");
function setConsole(time) {
    console.group('版本信息（🗺 三维地图开发框架）：');
    console.log(`%c 有 效 期 ：${time}`, `color: red; font-weight: bold`);
    console.log(`%c 编译日期 ：2022-09-14 17:30:00`, `color: #03A9F4; font-weight: bold`);
    console.log(`%c 其    它 ：
        1、如当前版本出现问题，请联系：18755191132（微信同号）
        2、未授权版本超过上述有效期后，此系统将不能使用！`, `color: #03A9F4; font-weight: bold`);
    console.groupEnd();
}


export default cUtil;

</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer style="">
    <img src="./img/logo1.png" style="width:120px;position:absolute;top:50px;right:40px;"/>
   <div style="margin-top:10%;">
        <h1 style="text-align:center;">欢迎使用Easy3d</h1>
        <h2 style="text-align:center;">三维可视化框架</h2>
        <div style="font-size:16px;">
            <span style="font-weight:bold;">说明：</span>
            <ul>
                <li>
                    Easy3d三维框架基于开源<a href="https://cesiumjs.org/">Cesium</a>框架进行了二次封装，在Cesium的基础上进行了大量的封装以及源码修改，最大程度上减少了开发人员的工作量。配合Easy3d-UI可视化界面框架，可在极短的时间里搭建起属于自己的三维系统。
                </li>
                <li>
                    如若在开发过程中遇到相关问题，可第一时间联系我方技术人员，我们会全力提供技术支持。
                </li>
            </ul>
        </div>
        <div style="font-size:16px;">
            <span style="font-weight:bold;">版权及其它：</span>
            <ul>
                <li>
                    版权所有：合肥数图网络科技有限公司
                </li>
                <li>
                    官网地址：<a href="http://www.mapgl.com/">http://www.mapgl.com/</a>
                </li>
                <li>
                    联系方式：18755191132（微信同号）
                </li>
                <li>
                    相关服务：我司提供包含离线地形、影像以及模型在内多种地图数据，可用于搭建离线环境下的三维系统；也提供相关系统开发技术指导、项目开发以及技术预研等相关服务。
                </li>
            </ul>
        </div>
   </div>
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
